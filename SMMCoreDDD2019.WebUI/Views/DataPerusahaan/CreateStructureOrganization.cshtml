@model SmmCoreDDD2019.Application.DataPerusahaanStrukturJabatanDB.Command.CreateDataPerusahaanStrukturJabatan.CreateDataPerusahaanStrukturJabatanCommand
@{
    ViewData["Title"] = "CreateStructureOrganization";
    Layout = "~/Views/Shared/_AdminlteCreate.cshtml";
}

<h2>Create Structure Organization</h2>

<div class="row">
    <div class="col-md-4">
        <form asp-action="CreateStructureOrganization">
            <div asp-validation-summary="ModelOnly" class="text-danger"></div>
            @*<div class="form-group">
                    <label asp-for="Lft" class="control-label"></label>
                    <input asp-for="Lft" class="form-control" />
                    <span asp-validation-for="Lft" class="text-danger"></span>
                </div>
                <div class="form-group">
                    <label asp-for="Rgt" class="control-label"></label>
                    <input asp-for="Rgt" class="form-control" />
                    <span asp-validation-for="Rgt" class="text-danger"></span>
                </div>*@
            <div class="form-group">
                <label class="control-label"></label>
                @*<input asp-for="Parent" class="form-control" />*@
                <select id="Parent1a" asp-items="ViewBag.DataAkun1" class="form-control">
                    <option value="0">(Tidak Ada)</option>
                </select>

            </div>
            <div class="form-group">
                <label class="control-label">Insert Setelah</label>
                <select name="Parent1" asp-for="Parent" id="Insert1b" class="form-control">
                    <option value="0">(Tidak Ada)</option>
                </select>
            </div>
            @*<div class="form-group">
                    <label asp-for="Depth" class="control-label"></label>
                    <input asp-for="Depth" class="form-control" />
                    <span asp-validation-for="Depth" class="text-danger"></span>
                </div>*@
            <div class="form-group">
                <label asp-for="KodeStruktur" class="control-label"></label>
                <input name="KodeAccount1" asp-for="KodeStruktur" class="form-control" />
                <span asp-validation-for="KodeStruktur" class="text-danger"></span>
            </div>
            <div class="form-group">
                <label asp-for="NamaStrukturJabatan" class="control-label"></label>
                <input name="Account1a" asp-for="NamaStrukturJabatan" class="form-control" />
                <span asp-validation-for="NamaStrukturJabatan" class="text-danger"></span>
            </div>
         
            <div class="form-group">
                <input type="submit" value="Create" class="btn btn-default" />
            </div>
        </form>
    </div>
</div>
<script>

    $(document).ready(function ()
    {
         $("#Parent1a").change(function ()
        {

                          $.ajax({
                                 type: 'GET',
                                  url: '@Url.Action("GetStructureOrganization")',
                                   datatype: JSON,
                              data: { 'data1a': $("#Parent1a").val() },
                                   success: function (data)
                                   {
                                      FillDropdown("Insert1b", jQuery.parseJSON(data))
                                    },
                                       error: function (data)
                                          {
                                              alert(data);
                                           alert('eror bosku');
                                           alert(jQuery.parseJSON(data));
                                          }
                           });
          });

    });

    // Generic code for any dropdown to fill called by ajax
    function FillDropdown(selector, vData) {
        if (vData.length > 0) {
            var vItems = [];
            for (var i in vData) {
                if (vData[i].Selected)
                    vItems.push('<option selectedselected=selected value="' + vData[i].Value + '">' + vData[i].Text + '</option>');
                else
                    vItems.push('<option value="' + vData[i].Value + '">' + vData[i].Text + '</option>');
            }
            $('#' + selector).empty();
            $('#' + selector).append(vItems.join(''));
            return true;
        }
        else {
            $('#' + selector).empty();
            return false;
        }
    }

</script>





@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}
